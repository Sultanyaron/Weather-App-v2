{"version":3,"sources":["components/Favorite/Favorite.js","containers/Favorites/Favorites.js"],"names":["withRouter","props","cityData","data","WeatherIcon","Temperature","WeatherText","metric","useSelector","state","userSettings","icon","getIconPath","dispatch","useDispatch","temp","Math","round","Metric","Value","Imperial","className","FavoriteHeart","cityKey","cityName","height","width","onClick","actions","history","push","src","alt","withErrorHandler","error","fetchFavoritesLoading","favorites","fetchedFavorites","favoritesCityKeys","i","length","onFetchFavoritesData","useCallback","onClearFetchedFavorites","useEffect","favoriteList","Spinner","map","fav","currentCityData","filter","item","key","axios"],"mappings":"oMA4CeA,eArCE,SAACC,GAAW,IAAD,EAE0BA,EAAMC,SAASC,KAAK,GAA9DC,EAFgB,EAEhBA,YAAaC,EAFG,EAEHA,YAAaC,EAFV,EAEUA,YAC1BC,EAAWC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,gBAAtCH,OACFI,EAAOC,YAAYR,GACnBS,EAAWC,cAEbC,EAAOC,KAAKC,MAAMZ,EAAYa,OAAOC,OAEpCZ,IACDQ,EAAOV,EAAYe,SAASD,OAQhC,OACI,yBAAKE,UAAU,mBACX,kBAACC,EAAA,EAAD,CACIC,QAAStB,EAAMsB,QACfC,SAAUvB,EAAMuB,SAChBC,OAAO,OACPC,MAAM,SACV,uBAAGL,UAAU,mBAAmBM,QAZhB,WAPGd,EAASe,IAA2B3B,EAAMuB,SAAUvB,EAAMsB,UASjFtB,EAAM4B,QAAQC,KAAK,OAU4C7B,EAAMuB,UACjE,yBAAKH,UAAU,sBACX,yBAAKA,UAAU,kBAAkBU,IAAKpB,EAAMqB,IAAK1B,IACjD,yBAAKe,UAAU,wBACX,uBAAGA,UAAU,mBAAmBN,EAAhC,QACA,uBAAGM,UAAU,mBAAmBf,S,wBCkCrC2B,uBA9DG,SAAAhC,GAERA,EAAMiC,MAMZ,IARuB,IAKfC,EAA0B3B,aAAY,SAAAC,GAAK,OAAIA,EAAM2B,aAArDD,sBALe,EAMiB3B,aAAY,SAAAC,GAAK,OAAIA,EAAM2B,aAA3DA,EANe,EAMfA,UAAWC,EANI,EAMJA,iBACbC,EAAoB,GACjBC,EAAI,EAAGA,EAAIH,EAAUI,OAAQD,IAClCD,EAAkBR,KAAKM,EAAUG,GAAGhB,SAExC,IAAMV,EAAWC,cACX2B,EAAuBC,uBAAY,SAACJ,GAAD,OAAuBzB,EAASe,IAAuBU,MAAoB,CAACzB,IAC/G8B,EAA0BD,uBAAY,kBAAM7B,EAASe,SAAiC,CAACf,IAE7F+B,qBAAU,WACNH,EAAqBH,KAEtB,CAACG,IAEJG,qBAAU,WACN,OAAO,WAEHD,OAEL,CAACA,IAGJ,IAAIE,EAAe,kBAACC,EAAA,EAAD,MAyBnB,OArBKX,GAA0BlC,EAAMiC,QACjCW,EACIT,EAAUW,KAAI,SAAAC,GACV,IAAMC,EAAkBZ,EAAiBa,QAAO,SAAAC,GAAI,OAAIH,EAAIzB,UAAY4B,EAAK5B,WAAS,GACtF,OAAO,kBAAC,EAAD,CACH6B,IAAKJ,EAAIzB,QACTrB,SAAU+C,EACVzB,SAAUwB,EAAIxB,SACdD,QAASyB,EAAIzB,cAMJ,IAArBa,EAAUI,SACVK,EAAe,wBAAIxB,UAAU,oBAAd,0BAAwD,6BAAxD,yBAOf,yBAAKA,UAAU,aACX,yBAAKA,UAAU,mBACVwB,MAM0BQ","file":"static/js/3.3ca9f977.chunk.js","sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { getIconPath } from '../../shared/getIconPath';\r\nimport FavoriteHeart from '../UI/FavoriteHeart/FavoriteHeart';\r\nimport * as actions from '../../store/actions/rootActions';\r\n\r\nconst Favorite = (props) => {\r\n    \r\n    const { WeatherIcon, Temperature, WeatherText } = props.cityData.data[0];\r\n    const { metric } = useSelector(state => state.userSettings);\r\n    const icon = getIconPath(WeatherIcon);\r\n    const dispatch = useDispatch();\r\n    const onSelectCity = () => dispatch(actions.updateSelectedCity(props.cityName, props.cityKey))\r\n    let temp = Math.round(Temperature.Metric.Value);\r\n\r\n    if (!metric) {\r\n        temp = Temperature.Imperial.Value\r\n    };\r\n    \r\n    const redirectHandler = () => {\r\n        onSelectCity();\r\n        props.history.push('/');\r\n    } ;\r\n\r\n    return (\r\n        <div className='favorites__item'>\r\n            <FavoriteHeart \r\n                cityKey={props.cityKey}\r\n                cityName={props.cityName}\r\n                height='4rem'\r\n                width='4rem' />\r\n            <p className='favorites__title' onClick={redirectHandler}>{props.cityName}</p>\r\n            <div className='favorites__details'>\r\n                <img className='favorites__icon' src={icon} alt={WeatherText} />\r\n                <div className='favorites__container'>\r\n                    <p className='favorites__temp'>{temp}Â°</p>\r\n                    <p className='favorites__text'>{WeatherText}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default withRouter(Favorite);","import React, { useEffect, useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Favorite from '../../components/Favorite/Favorite';\r\nimport * as actions from '../../store/actions/rootActions';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport axios from '../../shared/axios-weather';\r\n\r\n\r\nconst Favorites = props => {\r\n\r\n    if ( !props.error ) {\r\n\r\n    }\r\n    const { fetchFavoritesLoading } = useSelector(state => state.favorites)\r\n    const { favorites, fetchedFavorites } = useSelector(state => state.favorites);\r\n    const favoritesCityKeys = [];\r\n    for (let i = 0; i < favorites.length; i++) {\r\n        favoritesCityKeys.push(favorites[i].cityKey);\r\n    };\r\n    const dispatch = useDispatch();\r\n    const onFetchFavoritesData = useCallback((favoritesCityKeys) => dispatch(actions.fetchFavorites(favoritesCityKeys)),[dispatch]);\r\n    const onClearFetchedFavorites = useCallback(() => dispatch(actions.clearFetchedFavorites()),[dispatch]);\r\n\r\n    useEffect(() => {\r\n        onFetchFavoritesData(favoritesCityKeys);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [onFetchFavoritesData]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n\r\n            onClearFetchedFavorites();\r\n        };\r\n    }, [onClearFetchedFavorites]);\r\n    \r\n\r\n    let favoriteList = <Spinner />\r\n\r\n\r\n\r\n    if (!fetchFavoritesLoading && !props.error) {\r\n        favoriteList= (\r\n            favorites.map(fav => {\r\n                const currentCityData = fetchedFavorites.filter(item => fav.cityKey === item.cityKey)[0]\r\n                return <Favorite\r\n                    key={fav.cityKey}\r\n                    cityData={currentCityData}\r\n                    cityName={fav.cityName}\r\n                    cityKey={fav.cityKey} />\r\n            })\r\n        );\r\n        \r\n    };\r\n\r\n    if (favorites.length === 0) {\r\n        favoriteList = <h1 className='favorites__empty'>Your favorites is empty<br/>Add them at Homepage</h1>\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className='favorites'>\r\n            <div className='favorites__list'>\r\n                {favoriteList}\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default withErrorHandler(Favorites, axios);\r\n"],"sourceRoot":""}